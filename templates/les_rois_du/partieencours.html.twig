{% extends 'monTemplate.html.twig' %}

{% block sidebar %}

<body class="is-preload">
    <!-- Sidebar -->
    <section id="sidebar">
        <div class="inner">
            <nav>
                <ul>

                    <li><a href="{{ path('espace_partie')}}">RETOUR à l'espace partie</a></li>
                    {% for part in partiesCree %}
                    <li><a href="{{ path('partie_en_cours', {'idPartie' : part.id}) }}">{{part.nom}}</a></li>
                    {%endfor%}
                    {% for part in partiesRejoins %}
                    <li><a href="{{ path('partie_en_cours', {'idPartie' : part.id}) }}">{{part.nom}}</a></li>
                    {%endfor%}
                </ul>
            </nav>
        </div>
    </section>
    {% endblock %}

    {% block body %}
    <div id="wrapper">
        <section id="intro" class="wrapper style1 fullscreen fade-up">
            <div class="inner">
                <h2>
                    <center>{{partie.nom}}</center>
                </h2>
                {% if partie.plateauDeJeu.joueur is not null %}
                    {% if utilisateur.pseudo == partie.plateauDeJeu.joueur.pseudo %}
                    <div class="row">
                    <div class="col-md-12">
                        <p> Pour jouer il faut sélectionner un pion puis le lancer le dé. Votre pion se
                            déplacera du nombre
                            cases obtenues ! Une fois le pion arrivé sur la case, vous pouvez accéder au défi en cliquant
                           sur la case. </p>
                    </div>
                </div>
                    {%endif%}
                    {%endif%}
                <div class="row">

                    <div class="col-md-9">

                    </div>

                    <div class="col-md-1">

                        {% if utilisateur.pseudo == partie.createur.pseudo %}
                        <ul class="actions">
                            <li><a role="button" href="{{ path('parametres_partie', {'idPartie' : partie.id}) }}"
                                class="btn button scrolly">
                                Paramètres
                            </a></li>

                        </ul>
                            {% else %}
                        {%endif%}


                    </div>
                    <div class="col-md-2">
                    </div>
                </div>
                <br>


                <canvas id="canvas">Votre navigateur ne supporte pas HTML5, veuillez le mettre à jour pour
                    jouer.</canvas>

                <link rel="stylesheet" href="{{asset('tilemap/css/style.css')}}" />

                <script type="text/javascript">
                    var parametres = 'http://iparla.iutbayonne.univ-pau.fr:8002/api/partie/' + {{ partie.id }};
                </script>

                <script> var assetsBaseDir = "{{ asset('tilemap/') }}"</script>
                <script type="text/javascript" src="{{asset('tilemap/js/XmlHttpRequest.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/ToolBox.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/input.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/Parcours.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/game.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/De.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/Pion.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/Case.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/Tileset.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/classes/Map.js')}}"></script>
                <script type="text/javascript" src="{{asset('tilemap/js/main.js')}}"></script>



                <br>
                <p id="creaJoueur"></p>
                <script type="text/javascript">
                    setInterval(function ()
                    {
                        fetch(parametres)
                        .then(response => {
                            return response.json()
                        })
                        .then(data => {
                            document.getElementById("creaJoueur").innerHTML = "Créateur de la partie: " + data["createur"] + "<br>Joueur: " + data["joueur"];
                        })
                }, 2000);
                </script>




            </div>
        </section>
        </div>

        {% endblock %}
