{% extends 'monTemplate.html.twig' %}

    {% block body %}
        <section class="partie-container">
            <div class="tabs">
                <div class="tabs__sidebar">
                  {% for plateau in partie.plateauEnJeu %}
                    <button class="tabs__button" data-for-tab="{{loop.index}}">{{plateau.nom}}</button>
                  {% endfor %}
                </div>
                {% for plateau in partie.plateauEnJeu %}
                <div class="tabs__content" id="plateau-{{loop.index}}" data-tab="{{loop.index}}">

                </div>
                {% endfor %}
            </div>
            <div class="info-partie">
              <div class="info-partie__heading">
                <h1>{{partie.nom}}</h1>
                <h2>Créateur : {{partie.createur.pseudo}}</h2>
                <p>Nombre de plateau : {{partie.nbPlateaux}}</p>
              </div>
              {% for plateau in partie.plateauEnJeu %}
              <div class="info-partie__plateaux" style="border: 1px red solid">

                <h3>{{plateau.nom}}</h3>
                <p id="creaJoueur"></p>
                <div class="table-wrapper">
                  <table class="alt">
                    <thead>
                      <tr>
                        <th>Pion</th>
                        <th>Position</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for pion in plateau.pions %}

                      <tr>
                        <td>Rouge</td>
                        <td>5/69</td>
                      </tr>
                      {% endfor %}

                    </tbody>
                  </table>
                </div>
              </div>
              {% endfor %}
              <div class="option-partie">
                      {% if utilisateur.pseudo == partie.createur.pseudo %}
                            <button onclick="location.href='{{path('parametres_partie', {'idPartie' : partie.id})}}'">Paramètres</button>
                      {%endif%}
                      <button onclick="location.href='{{path('espace_partie')}}'">Retourner à l'espace partie</button>
              </div>
            </div>

        </section>
	{% block menuMiniScreen %}
  {% endblock %}

  <script type="text/javascript">
    function setupTabs(){
      document.querySelectorAll('.tabs__button').forEach(button => {
        button.addEventListener('click', () => {
          const sideBar = button.parentElement;
          const tabsContainer = sideBar.parentElement;
          const tabNumber = button.dataset.forTab;
          const tabToActivate = tabsContainer.querySelector(`.tabs__content[data-tab="${tabNumber}"]`);

          sideBar.querySelectorAll(".tabs__button").forEach(button => {
            button.classList.remove("tabs__button--active");
          });

          tabsContainer.querySelectorAll(".tabs__content").forEach(tab => {
            tab.classList.remove("tabs__content--active");
          });

          button.classList.add("tabs__button--active");
          tabToActivate.classList.add("tabs__content--active");

        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      setupTabs();

      document.querySelectorAll(".tabs").forEach( tabsContainer => {
        tabsContainer.querySelector(".tabs__sidebar .tabs__button").click();
      });

    });
  </script>

          <script type="text/javascript">
              var idPartie = {{ partie.id }};
              var assetsBaseDir = "{{ asset('tilemap/') }}"
          </script>

          <script type="text/javascript" src="{{asset('tilemap/js/classes/XmlHttpRequest.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/ToolBox.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Background.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Mouse.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Input.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Parcours.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/De.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Pion.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Case.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Tileset.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/Map.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/SceneGameplay.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/classes/fetchJoueurs.js')}}"></script>
          <script type="text/javascript" src="{{asset('tilemap/js/MainGame.js')}}"></script>


        {% endblock %}
